import React, { memo } from 'react';
import { cn } from '~/utils';

interface ArtifactLoaderProps {
  className?: string;
  size?: 'sm' | 'md' | 'lg';
}

/**
 * Branded animated loader for artifact preview
 * Uses the full branding logo with animated effects
 */
const ArtifactLoader = memo(function ArtifactLoader({ 
  className,
  size = 'lg' 
}: ArtifactLoaderProps) {
  // 10% smaller sizes
  const sizeClasses = {
    sm: 'w-44',
    md: 'w-56',
    lg: 'w-72',
  };

  const textSizeClasses = {
    sm: 'text-xs',
    md: 'text-sm',
    lg: 'text-base',
  };

  return (
    <div 
      className={cn(
        'flex flex-col items-center justify-center gap-6',
        className
      )}
    >
      {/* Full Branding Logo with animations */}
      <div className={cn('relative', sizeClasses[size])}>
        <svg 
          viewBox="0 0 291 148" 
          className="w-full h-auto"
          xmlns="http://www.w3.org/2000/svg"
        >
          <defs>
            {/* Gradient for the wave/shimmer effect */}
            <linearGradient id="shimmer-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stopColor="currentColor" stopOpacity="0.3">
                <animate 
                  attributeName="offset" 
                  values="-1; 2" 
                  dur="2s" 
                  repeatCount="indefinite" 
                />
              </stop>
              <stop offset="50%" stopColor="currentColor" stopOpacity="1">
                <animate 
                  attributeName="offset" 
                  values="-0.5; 2.5" 
                  dur="2s" 
                  repeatCount="indefinite" 
                />
              </stop>
              <stop offset="100%" stopColor="currentColor" stopOpacity="0.3">
                <animate 
                  attributeName="offset" 
                  values="0; 3" 
                  dur="2s" 
                  repeatCount="indefinite" 
                />
              </stop>
            </linearGradient>

            {/* Mask for the shimmer effect on logo */}
            <mask id="logo-mask">
              <rect x="0" y="0" width="291" height="148" fill="white" />
            </mask>

            {/* Gradient overlay for wave effect */}
            <linearGradient id="wave-gradient" x1="-100%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stopColor="transparent" />
              <stop offset="40%" stopColor="rgba(255,255,255,0.4)" />
              <stop offset="50%" stopColor="rgba(255,255,255,0.8)" />
              <stop offset="60%" stopColor="rgba(255,255,255,0.4)" />
              <stop offset="100%" stopColor="transparent" />
              <animateTransform
                attributeName="gradientTransform"
                type="translate"
                from="-1 0"
                to="2 0"
                dur="2s"
                repeatCount="indefinite"
              />
            </linearGradient>

            {/* Red gradient for star */}
            <linearGradient id="star-red-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stopColor="#ef4444" />
              <stop offset="100%" stopColor="#dc2626" />
            </linearGradient>

            {/* Glow filter for star */}
            <filter id="star-glow" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur stdDeviation="1.5" result="coloredBlur"/>
              <feMerge>
                <feMergeNode in="coloredBlur"/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>
          </defs>

          {/* Main logo group with shimmer effect */}
          <g className="text-text-primary">
            {/* R letter with chat bubble */}
            <g>
              <path 
                fill="currentColor" 
                d="M69.8,98.91l-29.85-29.91h19.53c5.23,0,8.4-3.26,8.4-8.31s-3.17-8.31-8.4-8.31h-25.99v46.54h-15.77v-62.31h41.76c15,0,23.91,9.17,23.91,23.49,0,10.2-4.8,17.06-12.43,20.14l18.6,18.69h-19.76Z"
              >
                <animate 
                  attributeName="opacity" 
                  values="0.7;1;0.7" 
                  dur="2s" 
                  repeatCount="indefinite" 
                />
              </path>
              <path 
                fill="currentColor" 
                opacity="0.6"
                d="M97.76,112.87H30.62l-23.1,23.09V22.63h69.18c-.38-1.64-.58-3.34-.58-5.07,0-.83.05-1.65.14-2.45H0v139.4l33.81-34.12h71.47v-17.38c-2.24-.49-5.01-1.55-7.52-3.84v13.7ZM97.77,39.25h-.01v28.35c.46-.55.96-1.07,1.48-1.58,1.8-1.71,3.83-3.19,6.04-4.38v-23.73c-2.34.87-4.87,1.34-7.51,1.34Z"
              >
                <animate 
                  attributeName="opacity" 
                  values="0.4;0.7;0.4" 
                  dur="2s" 
                  repeatCount="indefinite" 
                />
              </path>
            </g>

            {/* Rotating circle around star */}
            <g style={{ transformOrigin: '97.7px 17.5px' }}>
              <circle
                cx="97.7"
                cy="17.5"
                r="17"
                fill="none"
                stroke="currentColor"
                strokeWidth="1"
                strokeDasharray="8 6"
                opacity="0.4"
              >
                <animateTransform
                  attributeName="transform"
                  type="rotate"
                  from="0 97.7 17.5"
                  to="360 97.7 17.5"
                  dur="3s"
                  repeatCount="indefinite"
                />
              </circle>
            </g>

            {/* Star circle border (non-rotating, subtle) */}
            <path 
              fill="currentColor"
              opacity="0.5"
              d="M97.7,1.43c4.37,0,8.46,1.68,11.52,4.74,3.06,3.06,4.75,7.14,4.75,11.49,0,4.34-1.68,8.4-4.73,11.45-3.05,3.05-7.12,4.72-11.47,4.72-4.37,0-8.45-1.69-11.49-4.74-3.05-3.05-4.72-7.15-4.72-11.52,0-8.9,7.25-16.15,16.15-16.15h0M97.7,0h0c-9.65,0-17.56,7.91-17.57,17.57,0,9.83,7.82,17.68,17.64,17.69h0c9.76,0,17.62-7.84,17.62-17.6C115.39,7.87,107.51,0,97.7,0h0Z"
            />

            {/* RED STAR - static, no animation */}
            <polygon 
              points="108.91 15 100.43 15 97.81 6.93 95.19 15 86.72 15 93.57 19.98 90.95 28.04 97.81 23.06 104.67 28.04 102.05 19.98 108.91 15"
              fill="url(#star-red-gradient)"
              filter="url(#star-glow)"
            />

            {/* "danger" text */}
            <g opacity="0.9">
              <path fill="currentColor" d="M119.25,98.11l.4-2.72c-3.2,2.72-6.57,4-10.89,4-2.8,0-6.49-1.04-9.21-4.08-2.16-2.4-3.68-5.93-3.68-11.21,0-6.57,2.48-11.61,6.17-15.22,4.97-4.73,11.69-6.97,17.94-6.97,3.28,0,6.41.24,8.81.8.4.08.72.48.64,1.12l-4.81,34.28c0,.4-.4.72-.8.72h-3.92c-.4,0-.72-.24-.64-.72ZM119.97,90.34l3.12-23.15c-1.68-.24-2.96-.24-5.05-.08-4.25.24-8.65,1.92-11.77,5.13-2.72,2.8-4.49,6.81-4.49,11.69,0,3.6.96,6.17,2.4,7.85,1.84,2.08,4.41,2.88,6.25,2.88,3.36,0,6.49-1.04,9.53-4.32Z">
                <animate attributeName="opacity" values="0.7;1;0.7" dur="2s" repeatCount="indefinite" />
              </path>
              <path fill="currentColor" d="M171.01,80.41l-2.4,17.7c-.08.4-.4.72-.8.72h-4.32c-.4,0-.72-.24-.64-.72l2.4-17.7c.24-1.68.4-3.76.4-4.81,0-2.8-.64-5.13-2-6.73-1.12-1.28-2.8-2.08-5.05-2.08-2.96,0-5.61,1.12-7.69,3.28-2.96,3.04-4.08,7.13-4.49,9.85l-2.56,18.18c-.08.4-.4.72-.88.72h-4.25c-.48,0-.72-.24-.72-.72l4.89-34.68c0-.4.4-.8.88-.8h3.84c.4,0,.56.32.56.8l-.88,6.17h.16c1.44-2.16,2.96-3.76,4.64-4.97,2.56-1.84,5.45-2.64,8.41-2.64,3.6,0,6.09,1.12,7.85,3.04,2.16,2.4,3.12,6.09,3.12,9.93,0,1.36-.24,3.68-.48,5.45Z">
                <animate attributeName="opacity" values="0.7;1;0.7" dur="2s" repeatCount="indefinite" begin="0.1s" />
              </path>
              <path fill="currentColor" d="M204.55,95.39c-2.4,2.72-6.25,4.16-9.93,4.16-4.41,0-7.85-1.44-10.17-4.08-2.32-2.64-3.52-6.41-3.52-10.97,0-5.13,1.68-10.65,4.97-14.98,3.2-4.33,8.01-7.45,14.18-7.45,3.76,0,6.73,1.36,9.21,3.2l.24-1.84c.08-.56.4-.8.8-.8h3.76c.48,0,.64.32.56.8l-5.05,35.8c-.8,5.77-2.8,10.41-6.33,13.38-3.28,2.8-7.69,4.17-12.74,4.17s-9.93-1.76-12.89-3.84c-.4-.24-.48-.64-.24-1.04l1.92-3.12c.24-.48.72-.56,1.12-.24,2.72,1.92,6.09,3.44,10.41,3.44,4,0,6.97-1.04,9.13-3.12,2.08-2.08,3.36-5.05,3.92-8.89l.64-4.56ZM205.43,89.22l2.72-19.38c-1.92-1.52-4.25-2.88-7.45-2.88-4.32,0-7.69,2.24-10.01,5.45-2.4,3.28-3.76,7.69-3.76,11.61,0,3.12.72,5.77,2.16,7.69,1.52,1.92,3.84,3.04,6.89,3.04,3.28,0,7.45-1.76,9.45-5.53Z">
                <animate attributeName="opacity" values="0.7;1;0.7" dur="2s" repeatCount="indefinite" begin="0.2s" />
              </path>
              <path fill="currentColor" d="M228.79,85.46c.32,2.48,1.36,4.97,3.28,6.81,1.76,1.68,4.33,2.72,7.93,2.72,3.04,0,6.65-.72,9.29-2.4.48-.32.8-.24.96.16l1.28,2.8c.16.4.08.72-.24.96-2.8,1.76-7.29,3.04-12.41,3.04-4.25,0-8.17-1.28-11.13-3.84-3.04-2.72-4.89-6.73-4.89-12.25s2.08-10.89,5.61-14.82c3.6-4.08,8.81-6.65,14.82-6.65,3.68,0,6.57,1.04,8.49,2.64,1.92,1.6,2.96,3.92,2.96,6.57,0,5.45-3.52,9.21-8.73,11.53-5.21,2.24-11.53,2.8-17.22,2.72ZM228.63,81.77c4.49.24,9.85-.08,14.1-1.76,4.16-1.68,6.89-4.41,6.89-8.25,0-1.36-.48-2.56-1.44-3.52-1.04-1.12-2.88-1.76-5.13-1.76-3.84,0-7.61,1.68-10.25,4.89-2.32,2.8-3.84,6.41-4.17,10.41Z">
                <animate attributeName="opacity" values="0.7;1;0.7" dur="2s" repeatCount="indefinite" begin="0.3s" />
              </path>
              <path fill="currentColor" d="M291,64.71c.4.32.32.72.08,1.04l-2.08,3.36c-.24.4-.72.4-1.2.16-1.92-1.36-4.08-2.24-6.81-2.24-7.45,0-10.01,8.17-10.73,13.54l-2.48,17.54c0,.48-.32.72-.72.72h-4.49c-.4,0-.72-.32-.64-.72l4.81-34.68c.08-.48.4-.8.8-.8h3.84c.48,0,.72.32.64.8l-.72,5.45h.24c2.4-3.84,5.69-6.89,11.21-6.89,3.44,0,6.33,1.28,8.25,2.72Z">
                <animate attributeName="opacity" values="0.7;1;0.7" dur="2s" repeatCount="indefinite" begin="0.4s" />
              </path>
            </g>

            {/* Bottom text "By Texas Capital" */}
            <g opacity="0.7">
              <path fill="currentColor" d="M39.05,142.84v-12.3c0-.57.35-.97.9-.97h4.49c3.01,0,4.62,1.3,4.62,3.65,0,1.61-.9,2.66-2.6,3.12,2.18.44,3.21,1.74,3.21,3.52,0,2.66-1.69,3.94-5.19,3.94h-4.53c-.55,0-.9-.4-.9-.97ZM47.34,133.4c0-1.63-1.01-2.46-3.08-2.46h-3.56v5h3.63c1.89,0,3.01-1.01,3.01-2.53ZM47.96,139.76c0-1.74-1.17-2.57-3.52-2.57h-3.74v5.26h3.72c2.46,0,3.54-.77,3.54-2.68Z"/>
              <path fill="currentColor" d="M60.41,147.59l1.8-4.38c-.42-.02-.64-.13-.79-.51l-3.81-9.02c-.02-.13.37-.48.86-.48.4.02.75.26.99.95l3.21,8.03,2.84-7.96c.24-.81.68-1.01,1.08-.99.4,0,.79.33.77.44l-5.1,13.42c-.24.75-.62.95-1.03.95-.44,0-.84-.33-.81-.44Z"/>
              <path fill="currentColor" d="M90.52,131.07h-4.2c-.48,0-.75-.24-.75-.7v-.09c0-.46.26-.7.75-.7h10.03c.51,0,.77.24.77.7v.09c0,.46-.26.7-.77.7h-4.18v12.06c0,.48-.24.75-.73.75h-.22c-.46,0-.7-.26-.7-.75v-12.06Z"/>
              <path fill="currentColor" d="M108.34,133.07c2.93,0,4.82,2.07,4.82,5.17v.15c0,.37-.15.51-.55.51h-7.94c0,.09,0,.2.02.31.2,2.11,1.72,3.52,3.83,3.52,1.96,0,2.88-.92,3.41-1.94.09-.04.9.13.9.84,0,.33-.26.84-.84,1.3-.66.57-1.87,1.12-3.5,1.12-3.19,0-5.35-2.22-5.35-5.44s2.18-5.54,5.19-5.54ZM108.34,134.35c-1.91,0-3.34,1.41-3.63,3.41h6.89c-.09-2.05-1.34-3.41-3.26-3.41Z"/>
              <path fill="currentColor" d="M124.42,138.55l-3.54-4.73c-.04-.09.26-.59.81-.59.51,0,.77.24,1.06.7l2.71,3.72,2.66-3.7c.33-.55.66-.73,1.03-.73.57,0,.9.53.84.59l-3.56,4.73,3.52,4.73c.07.11-.24.62-.84.62-.48,0-.75-.26-1.01-.7l-2.73-3.74-2.66,3.72c-.29.46-.59.73-1.03.73-.55,0-.9-.53-.84-.62l3.59-4.73Z"/>
              <path fill="currentColor" d="M145.06,137.65h.24v-.44c0-1.78-1.03-2.77-2.84-2.77-1.67,0-2.68.81-3.21,1.87-.04.02-.97-.02-.97-.81,0-.31.22-.77.64-1.17.68-.66,1.89-1.25,3.63-1.25,2.79,0,4.31,1.56,4.31,4.16v6.49c0,.07-.29.18-.57.18-.46,0-.84-.22-.92-1.01-.02-.31-.04-.64-.04-.97-.7,1.28-2.13,2.11-3.89,2.11-2.2,0-3.56-1.14-3.56-2.93,0-2.38,2.24-3.39,7.2-3.45ZM145.3,138.68l-.37.02c-3.83.09-5.48.75-5.48,2.35,0,1.1.88,1.78,2.29,1.78,2.02,0,3.56-1.36,3.56-3.15v-1.01Z"/>
              <path fill="currentColor" d="M155.57,141.89c0-.55.62-.79.68-.77.66.95,1.85,1.65,3.56,1.65s2.62-.7,2.62-1.74c0-1.23-1.14-1.47-2.93-1.87-1.61-.33-3.63-.79-3.63-2.93,0-1.87,1.56-3.17,3.98-3.17,1.69,0,2.84.55,3.43,1.19.24.24.4.57.4.84,0,.55-.64.84-.68.79-.57-.88-1.72-1.56-3.12-1.56-1.61,0-2.53.73-2.53,1.74,0,1.14,1.1,1.41,2.84,1.8,1.72.37,3.79.84,3.79,2.99,0,1.91-1.61,3.19-4.18,3.19-1.72,0-2.9-.51-3.59-1.1-.44-.37-.64-.73-.64-1.06Z"/>
              <path fill="currentColor" d="M190.22,129.33c2.02,0,3.45.7,4.29,1.47.62.53.95,1.17.95,1.56,0,.84-.97,1.01-1.03.95-.73-1.52-2.35-2.53-4.22-2.53-3.1,0-5.24,2.4-5.24,5.92s2.16,5.9,5.28,5.9c2.27,0,3.79-1.28,4.31-2.84.04-.07,1.1.09,1.1.92,0,.44-.35,1.19-1.08,1.85-.86.79-2.38,1.52-4.4,1.52-4.16,0-6.93-3.01-6.93-7.33s2.82-7.39,6.98-7.39Z"/>
              <path fill="currentColor" d="M211.26,137.65h.24v-.44c0-1.78-1.03-2.77-2.84-2.77-1.67,0-2.68.81-3.21,1.87-.04.02-.97-.02-.97-.81,0-.31.22-.77.64-1.17.68-.66,1.89-1.25,3.63-1.25,2.79,0,4.31,1.56,4.31,4.16v6.49c0,.07-.29.18-.57.18-.46,0-.84-.22-.92-1.01-.02-.31-.04-.64-.04-.97-.7,1.28-2.13,2.11-3.89,2.11-2.2,0-3.56-1.14-3.56-2.93,0-2.38,2.24-3.39,7.2-3.45ZM211.5,138.68l-.37.02c-3.83.09-5.48.75-5.48,2.35,0,1.1.88,1.78,2.29,1.78,2.02,0,3.56-1.36,3.56-3.15v-1.01Z"/>
              <path fill="currentColor" d="M223.1,133.22c.46,0,.9.26.97,1.19l.02.9c.77-1.36,2.02-2.24,3.85-2.24,2.75,0,4.84,2.18,4.84,5.46s-2.05,5.52-4.88,5.52c-1.92,0-3.23-1.06-3.79-2.2v5.46c0,.55-.29.75-.68.75h-.18c-.42,0-.7-.2-.7-.75v-13.91s.24-.18.55-.18ZM227.65,134.41c-1.76,0-2.97,1.01-3.56,2.53v2.33c0,1.94,1.58,3.43,3.52,3.43,2.16,0,3.61-1.67,3.61-4.16s-1.52-4.14-3.56-4.14Z"/>
              <path fill="currentColor" d="M242.56,129c.64,0,1.01.35,1.01,1.01s-.4.99-1.03.99-.99-.35-.99-.99.37-1.01,1.01-1.01ZM242.46,133.22h.18c.42,0,.7.18.7.77v9.13c0,.57-.29.75-.7.75h-.18c-.42,0-.7-.18-.7-.75v-9.13c0-.57.29-.77.7-.77Z"/>
              <path fill="currentColor" d="M253.52,140.75v-6.09h-1.03c-.51,0-.68-.22-.68-.59v-.15c0-.37.18-.59.68-.59h1.03v-1.85c0-.55.29-.77.7-.77h.18c.42,0,.68.2.68.77v1.85h2.66c.48,0,.68.2.68.59v.13c0,.4-.2.62-.7.62h-2.66v5.85c0,1.54.46,2.2,1.56,2.2.7,0,1.23-.33,1.56-.81.07-.04.44.18.44.73,0,.26-.11.55-.4.81-.37.35-.97.62-1.83.62-1.94,0-2.88-1.08-2.88-3.3Z"/>
              <path fill="currentColor" d="M273.84,137.65h.24v-.44c0-1.78-1.03-2.77-2.84-2.77-1.67,0-2.68.81-3.21,1.87-.04.02-.97-.02-.97-.81,0-.31.22-.77.64-1.17.68-.66,1.89-1.25,3.63-1.25,2.79,0,4.31,1.56,4.31,4.16v6.49c0,.07-.29.18-.57.18-.46,0-.84-.22-.92-1.01-.02-.31-.04-.64-.04-.97-.7,1.28-2.13,2.11-3.89,2.11-2.2,0-3.56-1.14-3.56-2.93,0-2.38,2.24-3.39,7.2-3.45ZM274.09,138.68l-.37.02c-3.83.09-5.48.75-5.48,2.35,0,1.1.88,1.78,2.29,1.78,2.02,0,3.56-1.36,3.56-3.15v-1.01Z"/>
              <path fill="currentColor" d="M285.18,143.13v-14.15c0-.07.26-.18.57-.18.51,0,1.01.26,1.01,1.41v12.92c0,.57-.29.75-.7.75h-.18c-.42,0-.7-.18-.7-.75Z"/>
            </g>
          </g>

          {/* Shimmer/wave overlay effect */}
          <rect 
            x="0" 
            y="0" 
            width="291" 
            height="148" 
            fill="url(#wave-gradient)" 
            opacity="0.3"
            style={{ mixBlendMode: 'overlay' }}
          >
            <animate
              attributeName="x"
              values="-291;291"
              dur="2s"
              repeatCount="indefinite"
            />
          </rect>
        </svg>
      </div>

      {/* Loading text */}
      <div className={cn('flex items-center gap-1 text-text-secondary', textSizeClasses[size])}>
        <span>Loading preview</span>
        <span className="flex w-6">
          <span className="animate-[bounce_1.4s_ease-in-out_infinite]" style={{ animationDelay: '0ms' }}>.</span>
          <span className="animate-[bounce_1.4s_ease-in-out_infinite]" style={{ animationDelay: '200ms' }}>.</span>
          <span className="animate-[bounce_1.4s_ease-in-out_infinite]" style={{ animationDelay: '400ms' }}>.</span>
        </span>
      </div>

      {/* Custom keyframes */}
      <style>{`
        @keyframes bounce {
          0%, 60%, 100% { transform: translateY(0); }
          30% { transform: translateY(-4px); }
        }
      `}</style>
    </div>
  );
});

ArtifactLoader.displayName = 'ArtifactLoader';

export default ArtifactLoader;
